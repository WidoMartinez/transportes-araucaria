import React, { useMemo, useState, useEffect } from "react";
import { Label } from "./ui/label";
import { Input } from "./ui/input";
import { Button } from "./ui/button";
import { Badge } from "./ui/badge";
import { Checkbox } from "./ui/checkbox";
import {
	Select,
	SelectContent,
	SelectItem,
	SelectTrigger,
	SelectValue,
} from "./ui/select";
import { LoaderCircle, ArrowRight, ArrowLeft, ArrowRightLeft, MapPin, Calendar, Clock, Users, CheckCircle2, ShieldCheck, CreditCard, Info, Mountain, Lightbulb, Plane, Star, Sparkles } from "lucide-react";
import WhatsAppButton from "./WhatsAppButton";
import { useIsMobile } from "../hooks/use-mobile";
import heroVan from "../assets/hero-van.png";
import { getBackendUrl } from "../lib/backend";
import { motion, AnimatePresence } from "framer-motion";
import { destinosInfo } from "../data/destinos";
import AlertaDescuentoRetorno from "./AlertaDescuentoRetorno";
import { calcularDescuentoEscalonado, generarOpcionesDescuento } from "../utils/descuentoRetorno";
import {
	Dialog,
	DialogContent,
	DialogDescription,
	DialogHeader,
	DialogTitle,
	DialogTrigger,
} from "./ui/dialog";
import { ScrollArea } from "./ui/scroll-area";
import { TERMINOS_CONDICIONES, POLITICA_PRIVACIDAD } from "../data/legal";

// Función para generar opciones de hora en intervalos de 15 minutos (6:00 AM - 8:00 PM)
const generateTimeOptions = () => {
	const options = [];
	for (let hour = 6; hour <= 20; hour++) {
		for (let minute = 0; minute < 60; minute += 15) {
			const timeString = `${hour.toString().padStart(2, "0")}:${minute
				.toString()
				.padStart(2, "0")}`;
			const displayTime = `${hour.toString().padStart(2, "0")}:${minute
				.toString()
				.padStart(2, "0")}`;
			options.push({ value: timeString, label: displayTime });
		}
	}
	return options;
};

function HeroExpress({
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	formData,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	handleInputChange,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	setFormData,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	origenes,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	destinos,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	destinosData = [], // Data completa para imágenes
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	maxPasajeros,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	minDateTime,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	phoneError,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	setPhoneError,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	isSubmitting,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	cotizacion,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	pricing,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	baseDiscountRate,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	promotionDiscountRate,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	handlePayment,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	loadingGateway,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	onSubmitWizard,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	validarTelefono,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	codigoAplicado,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	codigoError,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	validandoCodigo,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	onAplicarCodigo,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	onRemoverCodigo,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	oportunidadesRetornoUniversal, // Recibido desde App.jsx
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

}) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [currentStep, setCurrentStep] = useState(0);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [stepError, setStepError] = useState("");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [errorRequiereVan, setErrorRequiereVan] = useState(false); // Error específico para grupos de 5-7 sin Van
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [paymentConsent, setPaymentConsent] = useState(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [selectedPaymentType, setSelectedPaymentType] = useState("total");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [reservaActiva, setReservaActiva] = useState(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [verificandoReserva, setVerificandoReserva] = useState(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [verificandoDisponibilidad, setVerificandoDisponibilidad] = useState(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [descuentoRetorno, setDescuentoRetorno] = useState(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [urgencyMessage, setUrgencyMessage] = useState(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Estado para alerta de descuento escalonado en reservas de retorno
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [descuentoEscalonadoInfo, setDescuentoEscalonadoInfo] = useState(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [horaTerminoServicioActivo, setHoraTerminoServicioActivo] = useState(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Estado para manejar error de carga de imagen
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const [imageLoadError, setImageLoadError] = useState(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Hook para detectar si es dispositivo móvil
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const isMobile = useIsMobile();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Resetear error de imagen cuando cambia el destino/imagen seleccionada
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	useEffect(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (currentStep === 1) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const messages = [
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				{ icon: <Clock className="h-3 w-3" />, text: "Solo queda 1 móvil" },
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				{ icon: <Users className="h-3 w-3" />, text: "Alta demanda para hoy" },
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				{ icon: <Users className="h-3 w-3" />, text: `${Math.floor(Math.random() * 3) + 2} personas cotizando` }
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			];
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setUrgencyMessage(messages[Math.floor(Math.random() * messages.length)]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		} else {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setUrgencyMessage(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	}, [currentStep]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Determinar el "target" para mostrar info (Destino principal o Origen si es traslado hacia aeropuerto)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const targetName = useMemo(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		return formData.destino !== "Aeropuerto La Araucanía" && formData.destino !== "Otro"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			? formData.destino
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			: (formData.origen !== "Aeropuerto La Araucanía" && formData.origen !== "Otro" ? formData.origen : null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	}, [formData.destino, formData.origen]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const timeOptions = useMemo(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		let options = generateTimeOptions();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Incorporar opciones de oportunidades de retorno si existen
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (oportunidadesRetornoUniversal && oportunidadesRetornoUniversal.opciones) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			oportunidadesRetornoUniversal.opciones.forEach(oportunidad => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				if (oportunidad.opcionesRetorno) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					oportunidad.opcionesRetorno.forEach(opcion => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						if (!options.some(opt => opt.value === opcion.hora)) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							options.push({ value: opcion.hora, label: opcion.hora });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					});
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			});
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Si la hora seleccionada no está en las opciones (ej: hora de descuento específica), agregarla
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (formData.hora && !options.some(opt => opt.value === formData.hora)) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			options.push({ value: formData.hora, label: formData.hora });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// --- FILTRADO POR ANTICIPACIÓN MÍNIMA ---
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Si la fecha es HOY, filtrar opciones que no cumplen con la anticipación
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const hoy = new Date();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const esHoy = formData.fecha === hoy.toISOString().split("T")[0];
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (esHoy) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const destinoObj = Array.isArray(destinosData)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				? destinosData.find(d => d.nombre === targetName)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				: null;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const anticipacion = destinoObj?.minHorasAnticipacion || 5;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const ahora = new Date();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			options = options.filter(opt => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const [h, m] = opt.value.split(":").map(Number);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const fechaOpt = new Date();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				fechaOpt.setHours(h, m, 0, 0);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const diffHoras = (fechaOpt - ahora) / 3600000;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				return diffHoras >= anticipacion;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			});
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Ordenar las opciones por hora
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		options.sort((a, b) => a.value.localeCompare(b.value));
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		return options;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	}, [formData.hora, oportunidadesRetornoUniversal, formData.fecha, targetName, destinosData]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const currencyFormatter = useMemo(
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		() =>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			new Intl.NumberFormat("es-CL", {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				style: "currency",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				currency: "CLP",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			}),
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		[]
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const formatCurrency = (value) => currencyFormatter.format(value || 0);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const fechaLegible = useMemo(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.fecha) return "Por confirmar";
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const parsed = new Date(`${formData.fecha}T00:00:00`);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (Number.isNaN(parsed.getTime())) return formData.fecha;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		return parsed.toLocaleDateString("es-CL", {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			dateStyle: "long",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			timeZone: "America/Santiago",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		});
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	}, [formData.fecha]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const tieneCotizacionAutomatica = typeof cotizacion.precio === "number";
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const requiereCotizacionManual =
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		formData.destino === "Otro" ||
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		(formData.destino && !tieneCotizacionAutomatica);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const mostrarPrecio = tieneCotizacionAutomatica;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Imagen dinámica basada en el destino seleccionado
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const selectedDestinoImage = useMemo(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// 1. Buscar en destinosInfo (datos locales enriquecidos)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (targetName && destinosInfo[targetName]?.imagen) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return destinosInfo[targetName].imagen;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// 2. Fallback: Buscar en destinosData (backend/props)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (targetName && Array.isArray(destinosData)) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const dest = destinosData.find(d => d.nombre === targetName);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (dest && dest.imagen) return dest.imagen;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// 3. Imagen por defecto
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		return heroVan;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	}, [targetName, destinosData]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Resetear error de imagen cuando cambia el destino/imagen seleccionada
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	useEffect(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setImageLoadError(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	}, [selectedDestinoImage]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Texto e información dinámica para el panel visual
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const richInfo = useMemo(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Prioridad: Info del paso 1 (Resumen)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (currentStep === 1) return {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			title: "Resumen de tu viaje",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			subtitle: "Estás a un paso de confirmar.",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			isSummary: true
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Prioridad: Info turística enriquecida
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (targetName && destinosInfo[targetName]) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				...destinosInfo[targetName],
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				isRich: true
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Fallback: Textos genéricos basados en selección
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (formData.destino && formData.destino !== "Aeropuerto La Araucanía" && formData.destino !== "Otro") {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return { title: `Viaja a ${formData.destino}`, subtitle: "Comodidad y seguridad garantizada." };
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (formData.origen && formData.origen !== "Aeropuerto La Araucanía" && formData.origen !== "Otro") {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return { title: `Viaja desde ${formData.origen}`, subtitle: "Comenzamos el viaje donde tú estés." };
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		return { title: "Transporte Privado", subtitle: "Conecta con Pucón, Villarrica y toda la región." };
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	}, [targetName, currentStep, formData.destino, formData.origen]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Lógica de retornos universales movida a App.jsx para centralizar precios
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const verificarReservaActiva = async (email) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!email || !email.trim()) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setReservaActiva(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setVerificandoReserva(true);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		try {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const apiUrl = getBackendUrl() || "https://transportes-araucaria.onrender.com";
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const response = await fetch(
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				`${apiUrl}/api/reservas/verificar-activa/${encodeURIComponent(email.trim())}`
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (response.ok) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const data = await response.json();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const reserva = data.tieneReservaActiva ? data.reserva : null;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				setReservaActiva(reserva);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				// Si hay reserva activa, calcular hora de término para descuentos escalonados
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				if (reserva && reserva.fecha && reserva.hora) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					const destinoObj = Array.isArray(destinosData)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						? destinosData.find(d => d.nombre === reserva.destino)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						: null;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					const duracionMinutos = destinoObj?.duracionIdaMinutos || 90;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					// Calcular hora de término del servicio original
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					const [horas, minutos] = reserva.hora.split(":").map(Number);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					const fechaHoraInicio = new Date(`${reserva.fecha}T00:00:00`);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					fechaHoraInicio.setHours(horas, minutos, 0, 0);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					const horaTermino = new Date(fechaHoraInicio.getTime() + duracionMinutos * 60 * 1000);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					setHoraTerminoServicioActivo(horaTermino);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		} catch (error) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			console.error("Error verificando reserva activa:", error);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setReservaActiva(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		} finally {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setVerificandoReserva(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Efecto para calcular descuento escalonado cuando cambia la hora de retorno
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	useEffect(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Solo calcular si:
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// 1. Hay una reserva activa (viaje de ida ya reservado)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// 2. El usuario está reservando un retorno (origen = destino anterior, destino = origen anterior)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// 3. Es la misma fecha o fecha cercana
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// 4. Tiene hora seleccionada
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!reservaActiva || !formData.hora || !formData.fecha) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setDescuentoEscalonadoInfo(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Verificar si es un viaje de retorno (el destino actual es el origen del viaje previo)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const esViajeRetorno = 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			formData.origen === reservaActiva.destino && 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			formData.destino === reservaActiva.origen;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// También verificar si la fecha es la misma del servicio original
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const mismaFecha = formData.fecha === reservaActiva.fecha;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!esViajeRetorno || !mismaFecha || !horaTerminoServicioActivo) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setDescuentoEscalonadoInfo(null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Calcular hora de retorno seleccionada
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const [horasRetorno, minutosRetorno] = formData.hora.split(":").map(Number);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const horaRetorno = new Date(`${formData.fecha}T00:00:00`);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		horaRetorno.setHours(horasRetorno, minutosRetorno, 0, 0);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Calcular descuento escalonado
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const descuento = calcularDescuentoEscalonado(horaTerminoServicioActivo, horaRetorno);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setDescuentoEscalonadoInfo(descuento);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	}, [reservaActiva, formData.hora, formData.fecha, formData.origen, formData.destino, horaTerminoServicioActivo]);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const handleSwap = () => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (formData.origen === "Aeropuerto La Araucanía") {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			handleInputChange({ target: { name: "origen", value: formData.destino } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		} else {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			handleInputChange({ target: { name: "destino", value: formData.origen } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const verificarDisponibilidadYRetorno = async () => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.destino || !formData.fecha || !formData.hora) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return { disponible: true, descuento: null };
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setVerificandoDisponibilidad(true);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		try {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			// Buscar el destino seleccionado para obtener la duración estimada
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			// Si destinosData está disponible, usarlo para más precisión, sino fallback a default
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const destinoObj = Array.isArray(destinosData)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				? destinosData.find(d => d.nombre === formData.destino)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				: null;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const duracionMinutos = destinoObj?.duracionIdaMinutos || 60;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const respDisponibilidad = await fetch(
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				`${getBackendUrl()}/api/disponibilidad/verificar`,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				{
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					method: "POST",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					headers: { "Content-Type": "application/json" },
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					body: JSON.stringify({
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						fecha: formData.fecha,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						hora: formData.hora,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						duracionMinutos: duracionMinutos,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						pasajeros: formData.pasajeros || 1,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					}),
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (!respDisponibilidad.ok) return { disponible: true, descuento: null };
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const dataDisponibilidad = await respDisponibilidad.json();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (!dataDisponibilidad.disponible) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				return { disponible: false, mensaje: dataDisponibilidad.mensaje, descuento: null };
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const respRetorno = await fetch(
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				`${getBackendUrl()}/api/disponibilidad/oportunidades-retorno`,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				{
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					method: "POST",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					headers: { "Content-Type": "application/json" },
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					body: JSON.stringify({
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						origen: formData.origen,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						destino: formData.destino,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						fecha: formData.fecha,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						hora: formData.hora,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					}),
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (respRetorno.ok) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const dataRetorno = await respRetorno.json();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				if (dataRetorno.hayOportunidad && dataRetorno.descuento > 0) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					return {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						disponible: true,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						descuento: {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							porcentaje: dataRetorno.descuento,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							mensaje: dataRetorno.mensaje,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							detalles: dataRetorno.detalles,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						},
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return { disponible: true, descuento: null };
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		} catch (error) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			console.error("Error verificando disponibilidad y retorno:", error);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return { disponible: true, descuento: null };
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		} finally {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setVerificandoDisponibilidad(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const handleStepOneNext = async () => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.origen?.trim()) return setStepError("Selecciona el origen.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.destino) return setStepError("Selecciona el destino.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.fecha) return setStepError("Selecciona la fecha.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.hora) return setStepError("Selecciona la hora.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const fechaSeleccionada = new Date(`${formData.fecha}T00:00:00`);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const hoy = new Date();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		hoy.setHours(0, 0, 0, 0);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (fechaSeleccionada < hoy) return setStepError("La fecha no puede ser pasada.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (formData.idaVuelta) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (!formData.fechaRegreso) return setStepError("Selecciona la fecha de regreso.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (!formData.horaRegreso) return setStepError("Selecciona la hora de regreso.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const fechaRegreso = new Date(`${formData.fechaRegreso}T00:00:00`);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (fechaRegreso < fechaSeleccionada) return setStepError("La fecha de regreso no puede ser anterior a la ida.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// Verificar si la fecha/hora está bloqueada
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		try {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const respBloqueo = await fetch(
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				`${getBackendUrl()}/api/bloqueos/verificar`,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				{
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					method: "POST",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					headers: { "Content-Type": "application/json" },
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					body: JSON.stringify({
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						fecha: formData.fecha,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						hora: formData.hora,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					}),
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (respBloqueo.ok) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const dataBloqueo = await respBloqueo.json();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				if (dataBloqueo.bloqueado) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					setStepError(`Agenda completada. ${dataBloqueo.motivo || "Esta fecha/hora no está disponible para reservas."}`);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		} catch (error) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			console.error("Error verificando bloqueo:", error);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			// Continuar si hay error en la verificación de bloqueo
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const resultado = await verificarDisponibilidadYRetorno();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!resultado.disponible) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			// Detectar si es un error por falta de vehículo Van para grupos grandes
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const numPasajeros = Number(formData.pasajeros) || 1;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (numPasajeros >= 5 && numPasajeros <= 7) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				setErrorRequiereVan(true);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				setStepError("Consulta disponibilidad por WhatsApp");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			} else {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				setErrorRequiereVan(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				setStepError(resultado.mensaje || "No hay vehículos disponibles.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// VALIDACIÓN ADICIONAL DE ANTICIPACIÓN MÍNIMA
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (formData.destino !== "Otro") {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			const destinoObj = Array.isArray(destinosData)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				? destinosData.find(d => d.nombre === targetName)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				: null;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			if (destinoObj) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const ahora = new Date();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const fechaReserva = new Date(`${formData.fecha}T${formData.hora}`);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const diffHoras = (fechaReserva - ahora) / 3600000;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				const anticipacion = destinoObj.minHorasAnticipacion || 5;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				if (diffHoras < anticipacion) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					setStepError(`Para ${destinoObj.nombre}, reserva con al menos ${anticipacion} horas de anticipación.`);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setDescuentoRetorno(resultado.descuento || null);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setStepError("");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setErrorRequiereVan(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setCurrentStep(1);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const validarDatosReserva = () => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.nombre?.trim()) return setStepError("Falta tu nombre.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.email?.trim()) return setStepError("Falta tu email.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!formData.telefono?.trim()) return setStepError("Falta tu teléfono.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!emailRegex.test(formData.email)) return setStepError("Email inválido.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!validarTelefono(formData.telefono)) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setPhoneError("Formato inválido (ej: +56 9 1234 5678)");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return false;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setPhoneError("");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!paymentConsent) return setStepError("Debes aceptar los términos.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setStepError("");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		return true;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const handleGuardarReserva = async () => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!validarDatosReserva()) return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const result = await onSubmitWizard();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!result.success) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setStepError(result.message || "Error al guardar.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		// alert("✅ Reserva guardada."); // Esto lo maneja el App.jsx
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const handleProcesarPago = async (gateway, type) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!validarDatosReserva()) return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		const result = await onSubmitWizard();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		if (!result.success) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			setStepError(result.message || "Error al procesar.");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		handlePayment(gateway, type, {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			reservaId: result.reservaId,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			codigoReserva: result.codigoReserva,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		});
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const handleStepBack = () => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setStepError("");
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setErrorRequiereVan(false);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		setCurrentStep(0);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const paymentOptions = useMemo(
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		() => [
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			{
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				id: "total",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				type: "total",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				title: "Pagar Total",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				amount: pricing.totalConDescuento,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				recommended: true,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			},
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		],
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		[pricing.totalConDescuento]
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	// Variants for animations
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const containerVariants = {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		hidden: { opacity: 0 },
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		show: {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			opacity: 1,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			transition: {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				staggerChildren: 0.1
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	const itemVariants = {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		hidden: { opacity: 0, y: 20 },
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		show: { opacity: 1, y: 0 }
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	};
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	return (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		<section id="inicio" className="relative w-full min-h-screen flex flex-col lg:grid lg:grid-cols-2 bg-background pt-20">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			{/* Mobile Header (Visual) - Optimizado para rendimiento móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			<div className="lg:hidden relative h-[35vh] min-h-[200px] w-full overflow-hidden bg-primary">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				<img
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					src={imageLoadError ? heroVan : selectedDestinoImage}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

                    onError={() => setImageLoadError(true)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					alt={`Imagen del destino ${formData.destino || 'seleccionado'}`}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					loading="eager"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					decoding="async"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					className="w-full h-full object-cover opacity-70 will-change-transform"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				<div className="absolute inset-0 bg-gradient-to-t from-primary/90 via-primary/40 to-primary/20" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				<div className="absolute bottom-14 left-4 right-4 z-10 safe-area-inset-bottom flex flex-col items-center text-center">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					<motion.div
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						key={richInfo.title}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						initial={{ opacity: 0, y: 10 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						animate={{ opacity: 1, y: 0 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						transition={{ duration: 0.3 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						className="flex flex-col items-center"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						<h1 className="text-4xl lg:text-2xl font-bold text-white leading-tight drop-shadow-lg mb-1">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{richInfo.isRich ? richInfo.titulo : richInfo.title}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						</h1>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						<p className="text-base text-white/95 font-medium drop-shadow-md mb-2 line-clamp-2 max-w-[85%]">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{richInfo.isRich ? richInfo.bajada : richInfo.subtitle}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						{/* Mobile Summary Pill - Tamaño táctil mejorado */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						{richInfo.isRich && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<div className="flex flex-wrap justify-center gap-2 mt-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<Badge variant="secondary" className="bg-white/90 backdrop-blur-sm text-xs font-semibold px-2.5 py-1 h-7 flex items-center gap-1.5 text-primary border-0 shadow-sm">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Plane className="w-3 h-3" /> {richInfo.distancia}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</Badge>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{richInfo.tiempo && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Badge variant="secondary" className="bg-white/90 backdrop-blur-sm text-xs font-semibold px-2.5 py-1 h-7 flex items-center gap-1.5 text-primary border-0 shadow-sm">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Clock className="w-3 h-3" /> {richInfo.tiempo}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</Badge>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			{/* Left Panel: Interaction (Form) - Padding optimizado para móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			<div className="relative flex flex-col justify-start lg:justify-center px-4 sm:px-6 py-6 sm:py-8 lg:p-16 xl:p-24 overflow-y-auto bg-card z-10 -mt-6 mx-4 sm:mx-6 lg:mx-0 rounded-t-3xl rounded-b-3xl lg:mt-0 lg:rounded-none shadow-[0_-10px_40px_rgba(0,0,0,0.1)] lg:shadow-none mb-6 lg:mb-0">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				<AnimatePresence mode="wait">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					{currentStep === 0 && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						<motion.div
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							key="step0"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							initial={{ opacity: 0, x: -20 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							animate={{ opacity: 1, x: 0 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							exit={{ opacity: 0, x: -20 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							transition={{ duration: 0.3 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							className="space-y-5 md:space-y-6 w-full max-w-lg mx-auto"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<div className="mb-6 hidden lg:block">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<h2 className="text-4xl font-bold tracking-tight text-foreground mb-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									{richInfo.isRich ? richInfo.titulo : richInfo.title}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</h2>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<p className="text-muted-foreground text-lg">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									{richInfo.isRich ? richInfo.bajada : richInfo.subtitle}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<div className="space-y-5 md:space-y-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{/* Selectores de origen y destino - Con botón swap en desktop */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] gap-4 md:gap-3 md:items-end">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Label htmlFor="origen" className="text-base md:text-sm font-semibold text-foreground">Origen</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="relative">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<MapPin className="absolute left-3 top-3.5 md:top-3 h-5 w-5 text-muted-foreground pointer-events-none z-10" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<select
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												id="origen"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												name="origen"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												value={formData.origen}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												aria-label="Seleccionar origen del viaje"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="w-full h-12 md:h-11 pl-10 pr-8 bg-gray-50 md:bg-gray-50 border border-gray-200 rounded-xl md:rounded-lg text-base md:text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white appearance-none cursor-pointer touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												{origenes.map((o) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<option key={o} value={o}>{o}</option>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</select>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											{/* Flecha personalizada para mejor visibilidad móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<div className="absolute right-3 top-3.5 md:top-3 h-5 w-5 pointer-events-none">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<svg className="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</svg>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									{/* Swap Button - Hidden on mobile, visible on desktop */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="hidden md:flex items-end pb-1">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Button
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											type="button"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											variant="ghost"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											size="icon"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											onClick={handleSwap}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											className="rounded-full bg-white border border-gray-200 shadow-sm hover:bg-gray-50 h-9 w-9 text-muted-foreground hover:text-primary transition-all"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											title="Intercambiar Origen y Destino"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<ArrowRightLeft className="h-4 w-4" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</Button>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Label htmlFor="destino" className="text-base md:text-sm font-semibold text-foreground">Destino</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="relative">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<MapPin className="absolute left-3 top-3.5 md:top-3 h-5 w-5 text-muted-foreground pointer-events-none z-10" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<select
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												id="destino"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												name="destino"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												value={formData.destino}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												aria-label="Seleccionar destino del viaje"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="w-full h-12 md:h-11 pl-10 pr-8 bg-gray-50 md:bg-gray-50 border border-gray-200 rounded-xl md:rounded-lg text-base md:text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white appearance-none cursor-pointer touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<option value="">Seleccionar...</option>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												{destinos.map((d) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<option key={d} value={d}>{d}</option>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</select>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<div className="absolute right-3 top-3.5 md:top-3 h-5 w-5 pointer-events-none">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<svg className="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</svg>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{/* Fecha y Hora - Optimizados para móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Label htmlFor="fecha" className="text-base md:text-sm font-semibold text-foreground">Fecha</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="relative">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Calendar className="absolute left-3 top-3.5 md:top-3 h-5 w-5 text-muted-foreground pointer-events-none z-10" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<input
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												id="fecha"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												type="date"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												name="fecha"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												value={formData.fecha}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												min={minDateTime}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												aria-label="Seleccionar fecha del viaje"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="w-full h-12 md:h-11 pl-10 pr-4 bg-gray-50 md:bg-gray-50 border border-gray-200 rounded-xl md:rounded-lg text-base md:text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Label htmlFor="hora" className="text-base md:text-sm font-semibold text-foreground">Hora</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="relative">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Clock className="absolute left-3 top-3.5 md:top-3 h-5 w-5 text-muted-foreground pointer-events-none z-10" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<select
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												id="hora"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												name="hora"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												value={formData.hora}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onChange={(e) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													handleInputChange({ target: { name: "hora", value: e.target.value } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												aria-label="Seleccionar hora del viaje"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="w-full h-12 md:h-11 pl-10 pr-8 bg-gray-50 md:bg-gray-50 border border-gray-200 rounded-xl md:rounded-lg text-base md:text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white appearance-none cursor-pointer touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<option value="" disabled>Seleccionar...</option>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												{timeOptions.map((t) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<option key={t.value} value={t.value}>{t.label}</option>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</select>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<div className="absolute right-3 top-3.5 md:top-3 h-5 w-5 pointer-events-none">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<svg className="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</svg>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{/* Selector de pasajeros - Optimizado para móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Label htmlFor="pasajeros" className="text-base md:text-sm font-semibold text-foreground">Pasajeros</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="relative">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Users className="absolute left-3 top-3.5 md:top-3 h-5 w-5 text-muted-foreground pointer-events-none z-10" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<select
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											id="pasajeros"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											name="pasajeros"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											value={formData.pasajeros}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											aria-label="Seleccionar número de pasajeros"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											className="w-full h-12 md:h-11 pl-10 pr-8 bg-gray-50 md:bg-gray-50 border border-gray-200 rounded-xl md:rounded-lg text-base md:text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white appearance-none cursor-pointer touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											{[...Array(maxPasajeros)].map((_, i) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<option key={i + 1} value={i + 1}>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													{i + 1} {i === 0 ? "persona" : "personas"}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</option>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</select>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="absolute right-3 top-3.5 md:top-3 h-5 w-5 pointer-events-none">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<svg className="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</svg>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{/* Alerta de oportunidades de retorno universal (sin email) */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{oportunidadesRetornoUniversal && oportunidadesRetornoUniversal.opciones?.length > 0 && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<AlertaDescuentoRetorno
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										oportunidadesRetorno={oportunidadesRetornoUniversal}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onSeleccionarHorario={(horaSeleccionada) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											handleInputChange({ target: { name: "hora", value: horaSeleccionada } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{/* Alerta de descuento escalonado por retorno */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{descuentoEscalonadoInfo && reservaActiva && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<AlertaDescuentoRetorno
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										descuentoInfo={descuentoEscalonadoInfo}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										horaTerminoServicio={horaTerminoServicioActivo}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										precioOriginal={cotizacion.precio}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										mostrarOpciones={true}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onSeleccionarHorario={(horaSeleccionada) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											// Formatear la hora seleccionada a HH:MM
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											const horaStr = horaSeleccionada.toLocaleTimeString("es-CL", {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												hour: "2-digit",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												minute: "2-digit",
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												hour12: false
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											});
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											handleInputChange({ target: { name: "hora", value: horaStr } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{/* Mensaje informativo cuando hay reserva activa y es viaje de retorno sin descuento aún calculado */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{(() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									// Extraer la lógica de detección de viaje de retorno para mejor legibilidad
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									const esViajeRetornoSinDescuento = reservaActiva && 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										!descuentoEscalonadoInfo && 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										formData.origen === reservaActiva.destino && 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										formData.destino === reservaActiva.origen && 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										formData.fecha === reservaActiva.fecha;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									if (!esViajeRetornoSinDescuento) return null;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									// Formatear hora de término del servicio
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									const horaTerminoFormateada = horaTerminoServicioActivo?.toLocaleTimeString("es-CL", { 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										hour: "2-digit", 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										minute: "2-digit" 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									});
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									return (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="rounded-xl p-4 bg-chocolate-500/10 border border-chocolate-400/30">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<div className="flex items-start gap-3">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<Sparkles className="h-5 w-5 text-chocolate-500 mt-0.5" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<h4 className="font-semibold text-chocolate-700 text-sm">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														¡Viaje de retorno detectado!
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													</h4>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<p className="text-xs text-chocolate-600 mt-1">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														Selecciona una hora cercana al término de tu viaje de ida 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														(aproximadamente {horaTerminoFormateada}) 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														para obtener descuentos de hasta 50%.
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													{horaTerminoServicioActivo && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														<div className="mt-2 flex flex-wrap gap-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															{generarOpcionesDescuento(horaTerminoServicioActivo).map((opcion, index) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																<Badge
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																	key={index}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																	variant="secondary"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																	className="cursor-pointer hover:bg-chocolate-200 transition-colors text-xs"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																	onClick={() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																		handleInputChange({ target: { name: "hora", value: opcion.horaFormateada } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																	}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																	{opcion.horaFormateada} → {opcion.descuento}% dcto
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																</Badge>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								})()}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{/* Checkboxes Row - Optimizados para interacción táctil móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="flex flex-col sm:flex-row gap-3 pt-3 md:pt-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										className={`flex items-center space-x-3 p-4 md:p-3 rounded-xl md:rounded-lg border-2 transition-all cursor-pointer touch-manipulation min-h-[52px] ${formData.idaVuelta ? 'bg-muted border-primary shadow-sm' : 'border-border hover:bg-muted/50 active:bg-muted/70'}`}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onClick={(e) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											// Evitar doble toggle cuando se hace click en el Label (que dispara click en Checkbox)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											// Si el click viene del label, lo ignoramos y dejamos que el evento del checkbox (sintetizado) lo maneje
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											if (e.target.tagName === 'LABEL') return;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											const newValue = !formData.idaVuelta;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											handleInputChange({ target: { name: "idaVuelta", value: newValue } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											if (!newValue) handleInputChange({ target: { name: "fechaRegreso", value: "" } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											else if (formData.fecha) handleInputChange({ target: { name: "fechaRegreso", value: formData.fecha } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										role="checkbox"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										aria-checked={formData.idaVuelta}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										tabIndex={0}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onKeyDown={(e) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											if (e.key === 'Enter' || e.key === ' ') {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												e.preventDefault();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												const newValue = !formData.idaVuelta;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												handleInputChange({ target: { name: "idaVuelta", value: newValue } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												if (!newValue) handleInputChange({ target: { name: "fechaRegreso", value: "" } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												else if (formData.fecha) handleInputChange({ target: { name: "fechaRegreso", value: formData.fecha } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Checkbox
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											id="idaVuelta"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											checked={formData.idaVuelta}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											className="data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground size-5 md:size-4"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="flex flex-col">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Label htmlFor="idaVuelta" className="cursor-pointer font-medium text-foreground text-base md:text-sm leading-tight">Necesito regreso</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											{!formData.idaVuelta && tieneCotizacionAutomatica && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<span className="text-[11px] md:text-xs text-emerald-600 font-medium animate-in fade-in slide-in-from-left-2 mt-0.5">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													Precio especial si reservas ida y vuelta
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</span>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										className={`flex items-center space-x-3 p-4 md:p-3 rounded-xl md:rounded-lg border-2 transition-all cursor-pointer touch-manipulation min-h-[52px] ${formData.sillaInfantil ? 'bg-muted border-primary shadow-sm' : 'border-border hover:bg-muted/50 active:bg-muted/70'}`}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onClick={() => handleInputChange({ target: { name: "sillaInfantil", value: !formData.sillaInfantil } })}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										role="checkbox"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										aria-checked={formData.sillaInfantil}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										tabIndex={0}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onKeyDown={(e) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											if (e.key === 'Enter' || e.key === ' ') {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												e.preventDefault();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												handleInputChange({ target: { name: "sillaInfantil", value: !formData.sillaInfantil } });
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Checkbox
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											id="sillaInfantil"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											checked={formData.sillaInfantil}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											className="data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground size-5 md:size-4"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Label htmlFor="sillaInfantil" className="cursor-pointer font-medium text-foreground text-base md:text-sm">Silla de niño</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{formData.idaVuelta && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<motion.div
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										initial={{ opacity: 0, height: 0 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										animate={{ opacity: 1, height: "auto" }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										className="space-y-4 pt-2"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Label className="text-base md:text-sm font-semibold text-foreground">Fecha de Regreso</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<div className="relative">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<Calendar className="absolute left-3 top-3.5 md:top-3 h-5 w-5 text-muted-foreground pointer-events-none z-10" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<input
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													type="date"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													name="fechaRegreso"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													value={formData.fechaRegreso}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													min={formData.fecha || minDateTime}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													aria-label="Seleccionar fecha de regreso"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													className="w-full h-12 md:h-11 pl-10 pr-4 bg-muted/50 border border-input rounded-xl md:rounded-lg text-base md:text-sm focus:ring-2 focus:ring-ring focus:border-transparent touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Label htmlFor="horaRegreso" className="text-base md:text-sm font-semibold text-foreground">Hora de Regreso</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<div className="relative">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<Clock className="absolute left-3 top-3.5 md:top-3 h-5 w-5 text-muted-foreground pointer-events-none z-10" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<select
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													id="horaRegreso"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													name="horaRegreso"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													value={formData.horaRegreso || ""}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													aria-label="Seleccionar hora de regreso"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													className="w-full h-12 md:h-11 pl-10 pr-8 bg-muted/50 border border-input rounded-xl md:rounded-lg text-base md:text-sm focus:ring-2 focus:ring-ring focus:border-transparent appearance-none cursor-pointer touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<option value="" disabled>Seleccionar...</option>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													{timeOptions.map((t) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														<option key={t.value} value={t.value}>{t.label}</option>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</select>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<div className="absolute right-3 top-3.5 md:top-3 h-5 w-5 pointer-events-none">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<svg className="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													</svg>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</div>							{stepError && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="mt-4 p-4 md:p-3 bg-destructive/10 text-destructive rounded-xl md:rounded-lg text-sm animate-in fade-in space-y-3">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<p>{stepError}</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									{errorRequiereVan && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<p className="text-xs text-center">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												Por favor comunícate con nosotros para coordinar tu viaje.
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<WhatsAppButton
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												message={`Hola, necesito reservar un traslado para ${formData.pasajeros} pasajeros desde ${formData.origen} a ${formData.destino} el ${formData.fecha} aproximadamente a las ${formData.hora}. ¿Tienen disponibilidad?`}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												variant="default"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												size="sm"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="w-full bg-green-600 hover:bg-green-700 text-white"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												Consultar Disponibilidad por WhatsApp
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</WhatsAppButton>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{/* Botón principal de reserva - Optimizado para móvil con área táctil grande */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<Button
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								onClick={handleStepOneNext}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								className="w-full h-14 md:h-14 bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl text-lg font-bold shadow-lg transition-transform active:scale-[0.98] touch-manipulation min-h-[56px]"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								disabled={isSubmitting || verificandoDisponibilidad}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								aria-label="Reservar ahora"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{verificandoDisponibilidad ? (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<LoaderCircle className="h-6 w-6 animate-spin" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								) : (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<span className="flex items-center gap-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										Reservar Ahora <ArrowRight className="h-5 w-5" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</span>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</Button>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					{currentStep === 1 && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						<motion.div
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							key="step1"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							initial={{ opacity: 0, x: 20 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							animate={{ opacity: 1, x: 0 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							exit={{ opacity: 0, x: 20 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							transition={{ duration: 0.3 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							className="space-y-5 md:space-y-6 w-full max-w-lg mx-auto"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{/* Header del paso 2 con botón volver optimizado para táctil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<div className="flex items-center gap-3 md:gap-4 mb-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<Button 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									variant="ghost" 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									size="icon" 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									onClick={handleStepBack} 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									className="rounded-full hover:bg-muted active:bg-muted/80 min-w-[44px] min-h-[44px] touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									aria-label="Volver al paso anterior"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<ArrowLeft className="h-5 w-5" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</Button>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<h2 className="text-xl md:text-2xl font-bold text-foreground">Detalles y Pago</h2>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<p className="text-sm text-muted-foreground">Completa tus datos para finalizar.</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{/* Resumen del viaje - Optimizado para lectura móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<div className="bg-muted/30 p-4 rounded-xl border border-border space-y-3">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="flex justify-between items-start">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="flex-1 min-w-0">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<p className="text-xs font-bold text-muted-foreground uppercase tracking-wide">Ruta</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<p className="font-semibold text-foreground text-sm md:text-base break-words">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											{formData.origen === "Otro" ? formData.otroOrigen : formData.origen}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<span className="mx-1 md:mx-2 text-muted-foreground">→</span>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											{formData.destino === "Otro" ? formData.otroDestino : formData.destino}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="flex justify-between">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<p className="text-xs font-bold text-muted-foreground uppercase">Fecha</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<p className="font-medium text-sm">{fechaLegible} - {formData.hora}</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										{formData.idaVuelta && formData.fechaRegreso && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<p className="font-medium text-sm mt-1">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<span className="text-muted-foreground text-xs block">Retorno:</span>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												{new Date(`${formData.fechaRegreso}T00:00:00`).toLocaleDateString("es-CL", { dateStyle: "long" })}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="text-right flex flex-col items-end">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<p className="text-xs font-bold text-muted-foreground uppercase">Total</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										{pricing.totalNormal > pricing.totalConDescuento && formData.idaVuelta ? (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<p className="text-sm text-muted-foreground line-through decoration-destructive/60 decoration-1">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													{formatCurrency(pricing.totalNormal)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<p className="font-bold text-lg text-emerald-600">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													{formatCurrency(pricing.totalConDescuento)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										) : (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<p className="font-bold text-lg text-foreground">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												{formatCurrency(pricing.totalConDescuento)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										{urgencyMessage && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Badge variant="outline" className="mt-1 border-muted-foreground/30 text-muted-foreground text-[10px] px-2 py-0 h-5 font-medium flex items-center gap-1 animate-in fade-in zoom-in duration-300">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												{urgencyMessage.icon}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												{urgencyMessage.text}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</Badge>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{descuentoRetorno && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="flex items-center gap-2 text-xs font-medium text-accent bg-accent/10 p-2 rounded-lg">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<CheckCircle2 className="h-4 w-4" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										¡Descuento por retorno aplicado!
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{/* NUEVO: Opción de upgrade a Van - Solo para 1-3 pasajeros */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{formData.pasajeros && parseInt(formData.pasajeros) <= 3 && (() => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const destinoInfo = destinosData.find(d => d.nombre === targetName);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								if (!destinoInfo || !destinoInfo.precios?.van?.base) return null;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// CALCULAR SIEMPRE BASÁNDOSE EN EL PRECIO DEL SEDAN, NO EN EL ESTADO ACTUAL
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// Calcular precio base del Sedan sin descuentos
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const preciosAuto = destinoInfo.precios.auto;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const baseAuto = Number(preciosAuto.base);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const adicionales = parseInt(formData.pasajeros) - 1;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const precioSedanBase = baseAuto + (adicionales * baseAuto * preciosAuto.porcentajeAdicional);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const precioSedanSinDescuentos = formData.idaVuelta ? precioSedanBase * 2 : precioSedanBase;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// Calcular precio Sedan CON descuentos (usando pricing solo si NO está en modo upgrade)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// Si upgrade está activado, usar cotización inversa
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								let precioSedanConDescuentos;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								if (formData.upgradeVan) {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									// Si upgrade activado, calcular desde el precio total actual
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									// El pricing.totalConDescuento es de la Van, necesitamos recalcular el Sedan
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									// Usar mismo porcentaje de descuento
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									const precioActualVan = pricing.totalConDescuento || 0;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									const precioBaseVan = Number(destinoInfo.precios.van.base);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									const precioVan4PaxSinDescuentos = formData.idaVuelta ? precioBaseVan * 2 : precioBaseVan;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									const porcentajeDescuento = precioVan4PaxSinDescuentos > 0 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										? 1 - (precioActualVan / precioVan4PaxSinDescuentos)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										: 0;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									precioSedanConDescuentos = precioSedanSinDescuentos * (1 - porcentajeDescuento);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								} else {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									// Si upgrade NO activado, usar el precio actual directamente
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									precioSedanConDescuentos = pricing.totalConDescuento || 0;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// Calcular precio Van para 4 pasajeros (precio base sin adicionales)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const precioBaseVan = Number(destinoInfo.precios.van.base);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const precioVan4PaxSinDescuentos = formData.idaVuelta ? precioBaseVan * 2 : precioBaseVan;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// Calcular porcentaje de descuento (siempre el mismo para ambos vehículos)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const porcentajeDescuento = formData.upgradeVan
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									? (precioVan4PaxSinDescuentos > 0 ? 1 - ((pricing.totalConDescuento || 0) / precioVan4PaxSinDescuentos) : 0)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									: (precioSedanSinDescuentos > 0 ? 1 - ((pricing.totalConDescuento || 0) / precioSedanSinDescuentos) : 0);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// Aplicar el mismo porcentaje de descuento a la Van para 4 pax
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const precioVan4PaxConDescuentos = precioVan4PaxSinDescuentos * (1 - porcentajeDescuento);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// Diferencia = Van 4 pax con descuentos - Sedan con descuentos (SIEMPRE FIJA)
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								const diferenciaTotal = precioVan4PaxConDescuentos - precioSedanConDescuentos;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								// No mostrar si la diferencia es negativa o muy pequeña
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								if (diferenciaTotal <= 500) return null;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								return (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="mt-6 pt-6 border-t border-border">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className={`flex items-start gap-3 p-4 rounded-lg border-2 transition-all ${
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											formData.upgradeVan 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												? 'bg-chocolate-50/50 border-chocolate-500 shadow-md ring-1 ring-chocolate-500/20' 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												: 'bg-muted/30 border-chocolate-300/50 hover:bg-chocolate-50/30'
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										}`}>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<input
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												type="checkbox"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												id="upgrade-van"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												checked={formData.upgradeVan || false}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onChange={(e) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													setFormData(prev => ({
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														...prev,
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														upgradeVan: e.target.checked
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													}));
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="mt-1 h-5 w-5 rounded border-chocolate-400 text-chocolate-600 focus:ring-chocolate-500 cursor-pointer"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<label htmlFor="upgrade-van" className="flex-1 cursor-pointer">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<div className="flex items-center justify-between gap-3 mb-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														<span className="text-base font-bold text-chocolate-900">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															Upgrade a Van
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														</span>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<span className="text-base font-bold text-chocolate-600 whitespace-nowrap">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														+{formatCurrency(diferenciaTotal)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													</span>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													<p className="text-sm text-chocolate-800 leading-relaxed font-medium">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														<strong>Más espacio, confort y reclinación:</strong> Ideal para viajes largos o con equipaje extra.
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							})()}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<div className="space-y-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Label htmlFor="nombre" className="font-semibold text-foreground text-base">Nombre Completo</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Input
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										id="nombre"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										name="nombre"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										type="text"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										inputMode="text"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										autoComplete="name"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										value={formData.nombre}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										placeholder="Tu nombre completo"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										className="bg-muted/50 border-input h-12 md:h-11 text-base touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Label htmlFor="email" className="font-semibold text-foreground text-base">Email</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="relative">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Input
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												id="email"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												type="email"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												inputMode="email"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												autoComplete="email"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												name="email"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												value={formData.email}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onBlur={(e) => verificarReservaActiva(e.target.value)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												placeholder="tu@email.com"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="bg-muted/50 border-input h-12 md:h-11 text-base touch-manipulation"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											{verificandoReserva && <span className="absolute right-3 top-3.5 text-xs text-muted-foreground">...</span>}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Label htmlFor="telefono" className="font-semibold text-foreground text-base">Teléfono</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Input
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											id="telefono"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											name="telefono"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											type="tel"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											inputMode="tel"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											autoComplete="tel"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											value={formData.telefono}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											onChange={handleInputChange}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											placeholder="+56 9 1234 5678"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											className={`bg-muted/50 border-input h-12 md:h-11 text-base touch-manipulation ${phoneError ? "border-destructive" : ""}`}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										{phoneError && <p className="text-xs text-destructive mt-1">{phoneError}</p>}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{/* Checkbox de términos - Optimizado para área táctil móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<div 
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								className="flex items-start gap-3 p-4 md:p-3 bg-muted/30 rounded-xl md:rounded-lg border-2 border-border cursor-pointer touch-manipulation min-h-[52px] transition-colors hover:bg-muted/50 active:bg-muted/70"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								onClick={() => setPaymentConsent(!paymentConsent)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								role="checkbox"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								aria-checked={paymentConsent}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								tabIndex={0}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								onKeyDown={(e) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									if (e.key === 'Enter' || e.key === ' ') {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										e.preventDefault();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										setPaymentConsent(!paymentConsent);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<Checkbox
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									id="terms"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									checked={paymentConsent}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									onCheckedChange={(c) => setPaymentConsent(!!c)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									className="mt-0.5 data-[state=checked]:bg-primary size-5 md:size-4"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<Label htmlFor="terms" className="text-sm md:text-sm text-muted-foreground leading-snug cursor-pointer select-none">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									Acepto los
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Dialog>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<DialogTrigger asChild>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<span
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="underline font-medium text-foreground mx-1 hover:text-primary transition-colors"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onClick={(e) => e.stopPropagation()}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												role="button"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												tabIndex={0}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onKeyDown={(e) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													if (e.key === 'Enter' || e.key === ' ') {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														e.stopPropagation();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												términos y condiciones
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</span>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</DialogTrigger>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<DialogContent onClick={(e) => e.stopPropagation()}>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<DialogHeader>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<DialogTitle>Términos y Condiciones</DialogTitle>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<DialogDescription>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													Por favor, lee atentamente nuestras condiciones de servicio.
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</DialogDescription>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</DialogHeader>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<ScrollArea className="h-[60vh] pr-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<div className="space-y-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													{TERMINOS_CONDICIONES.map((seccion, index) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														<div key={index} className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															<h4 className="font-semibold text-foreground">{seccion.titulo}</h4>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															{Array.isArray(seccion.contenido) ? (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																<ul className="list-disc list-inside space-y-1 text-sm text-muted-foreground">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																	{seccion.contenido.map((item, i) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																		<li key={i}>{item}</li>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																	))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																</ul>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															) : (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

																<p className="text-sm text-muted-foreground">{seccion.contenido}</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</ScrollArea>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</DialogContent>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</Dialog>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									y la
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Dialog>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<DialogTrigger asChild>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<span
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												className="underline font-medium text-foreground ml-1 hover:text-primary transition-colors"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onClick={(e) => e.stopPropagation()}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												role="button"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												tabIndex={0}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												onKeyDown={(e) => {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													if (e.key === 'Enter' || e.key === ' ') {
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														e.stopPropagation();
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												}}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												política de privacidad
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</span>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</DialogTrigger>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<DialogContent onClick={(e) => e.stopPropagation()}>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<DialogHeader>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<DialogTitle>Política de Privacidad</DialogTitle>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<DialogDescription>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													Tu privacidad es importante para nosotros.
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</DialogDescription>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</DialogHeader>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<ScrollArea className="h-[60vh] pr-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<div className="space-y-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													{POLITICA_PRIVACIDAD.map((seccion, index) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														<div key={index} className="space-y-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															<h4 className="font-semibold text-foreground">{seccion.titulo}</h4>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

															<p className="text-sm text-muted-foreground">{seccion.contenido}</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

														</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</ScrollArea>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</DialogContent>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</Dialog>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									.
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</Label>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{stepError && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<div className="p-4 md:p-3 rounded-xl md:rounded-lg bg-destructive/10 border border-destructive/20 text-destructive text-base md:text-sm text-center">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									{stepError}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							{/* Botones de pago - Optimizados para móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<div className="pt-2 space-y-3">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{mostrarPrecio && !requiereCotizacionManual ? (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Button
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onClick={() => handleProcesarPago("flow", "total")}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										disabled={isSubmitting || !!loadingGateway}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										className="w-full h-14 md:h-14 bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl text-lg font-bold shadow-lg flex items-center justify-center gap-2 transition-transform active:scale-[0.98] touch-manipulation min-h-[56px]"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										aria-label={`Pagar ${formatCurrency(pricing.totalConDescuento)}`}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										{loadingGateway ? <LoaderCircle className="animate-spin" /> : (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<CreditCard className="h-5 w-5" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												Pagar {formatCurrency(pricing.totalConDescuento)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</Button>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								) : (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<Button
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										onClick={handleGuardarReserva}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										disabled={isSubmitting}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										className="w-full h-14 md:h-14 bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl text-lg font-bold shadow-lg transition-transform active:scale-[0.98] touch-manipulation min-h-[56px]"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										aria-label="Solicitar reserva"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										{isSubmitting ? <LoaderCircle className="animate-spin" /> : "Solicitar Reserva"}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</Button>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{/* Indicador de seguridad - Visible y claro en móvil */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<p className="text-center text-sm md:text-xs text-muted-foreground mt-4 flex items-center justify-center gap-1.5">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<ShieldCheck className="h-4 w-4 md:h-3 md:w-3" /> Pago 100% seguro vía Flow
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				</AnimatePresence>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			{/* Right Panel: Dynamic Visuals (Desktop) */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			<div className="relative hidden lg:block h-full overflow-hidden bg-primary sticky top-0">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				<AnimatePresence mode="wait">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					<motion.img
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						key={selectedDestinoImage}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						src={selectedDestinoImage}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						alt="Destino"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						loading="lazy"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						initial={{ opacity: 0, scale: 1.1 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						animate={{ opacity: 0.6, scale: 1 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						exit={{ opacity: 0 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						transition={{ duration: 1 }}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						className="absolute inset-0 w-full h-full object-cover"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					/>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				</AnimatePresence>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				<div className="absolute inset-0 bg-gradient-to-t from-primary/95 via-primary/50 to-primary/20" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				<div className="absolute bottom-0 left-0 w-full p-16 z-10 flex flex-col justify-end h-full">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					<motion.div
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						key={richInfo.title}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						variants={containerVariants}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						initial="hidden"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						animate="show"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						className="space-y-8 max-w-xl"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						{/* Título y Bajada */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						<motion.div variants={itemVariants}>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<h1 className="text-6xl font-bold text-primary-foreground mb-4 tracking-tight leading-none drop-shadow-lg">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{richInfo.isRich ? richInfo.titulo : richInfo.title}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</h1>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<p className="text-xl text-primary-foreground/90 font-medium border-l-4 border-white/30 pl-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{richInfo.isRich ? richInfo.bajada : richInfo.subtitle}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						{/* Información de Viaje (Rich Data) */}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						{richInfo.isRich && !richInfo.isSummary && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							<>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<motion.div variants={itemVariants} className="flex gap-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="flex items-center gap-3 bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10 flex-1">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="p-2 bg-white/20 rounded-full">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Plane className="w-5 h-5 text-white" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<p className="text-xs text-white/70 uppercase font-semibold">Distancia</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<p className="text-white font-bold">{richInfo.distancia}</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="flex items-center gap-3 bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10 flex-1">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="p-2 bg-white/20 rounded-full">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Clock className="w-5 h-5 text-white" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<p className="text-xs text-white/70 uppercase font-semibold">Tiempo Estimado</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<p className="text-white font-bold">{richInfo.tiempo}</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								<motion.div variants={itemVariants} className="space-y-4">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<div className="flex items-center gap-2">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<Star className="w-5 h-5 text-yellow-400 fill-yellow-400" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<h3 className="text-lg font-bold text-white">Imperdibles</h3>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<ul className="grid gap-3">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										{richInfo.puntosInteres?.map((punto, i) => (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<li key={i} className="flex items-center gap-3 text-white/90 font-medium">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<CheckCircle2 className="w-5 h-5 text-green-400 flex-shrink-0" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												{punto}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</li>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										))}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</ul>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								{richInfo.datoCurioso && (
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									<motion.div variants={itemVariants} className="mt-6 bg-chocolate-900/40 backdrop-blur-md p-5 rounded-xl border border-chocolate-400/30">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										<div className="flex gap-3">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<Lightbulb className="w-6 h-6 text-yellow-300 flex-shrink-0" />
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											<div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<p className="text-sm font-bold text-yellow-300 mb-1">¿Sabías que?</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												<p className="text-sm text-white/90 italic leading-relaxed">
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

													"{richInfo.datoCurioso}"
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

												</p>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

											</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

										</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

									</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

								)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

							</>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

						)}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

					</motion.div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

				</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

			</div>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

		</section>
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

	);
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

}
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);


	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

export default HeroExpress;
	// Cargar datos de oportunidad desde localStorage si existen
	useEffect(() => {
		const datosOportunidad = localStorage.getItem("datosOportunidad");
		if (datosOportunidad) {
			try {
				const datos = JSON.parse(datosOportunidad);
				setFormData((prev) => ({
					...prev,
					origen: datos.origen || prev.origen,
					destino: datos.destino || prev.destino,
					fecha: datos.fecha || prev.fecha,
					hora: datos.hora || prev.hora,
					codigoOportunidad: datos.codigoOportunidad, // Guardar código para tracking
				}));
				// Limpiar localStorage después de cargar
				localStorage.removeItem("datosOportunidad");
				console.log("✅ Datos de oportunidad cargados:", datos);
			} catch (error) {
				console.error("Error parseando datos de oportunidad:", error);
			}
		}
	}, []);

